<EventEditFormModal @ref="EditEventModal"/>

<!-- Calendar -->
<div class="calendar">
    <div class="d-flex justify-content-between w-100">
        <button class="btn btn-outline-primary text-capitalize"
                @onclick="RemoveMonth">
            @LocalizedResources.CalendarComponent_PreviousMonth
        </button>
        @if (IsLoaded)
        {
            <h2 class="month font-weight-bold mb-0 text-capitalize">@Month @Year</h2>
        }
        <button class="btn btn-outline-primary text-capitalize"
                @onclick="AppendMonth">
            @LocalizedResources.CalendarComponent_NextMonth
        </button>
    </div>

    @if (IsLoaded)
    {
        <div class="day-names">
            @foreach (string day in DayOfWeekNamesWithFirstDay!)
            {
                <div class="value day-name">@day</div>
            }
        </div>
        <div class="days">
            @{
                foreach (DayViewModel dayNum in DateRangeViewModel!.Days)
                {
                    <div class="day-num @(dayNum.IsWeekEndDay ? "weekend" : string.Empty)">
                        <div class="day-container">
                            <div class="value @(dayNum.IsHidden ? "outside" : dayNum.IsTodayDay ? "fw-bold text-danger" : string.Empty)">@dayNum.Day</div>
                            @{
                                foreach (EventViewModel ev in dayNum.Events)
                                {
                                    <div class="event all-day end bg-success" @onclick="() => EditEventModal.Open(ev)">@ev.Name</div>
                                }
                            }
                        </div>
                    </div>
                }
            }
        </div>
    }
    else
    {
        <div class="loader">
            <div class="spinner-border text-primary" role="status" style="width: 5rem; height: 5rem;"></div>
            <p class="mt-4">@LocalizedResources.Loading</p>
        </div>
    }
</div>